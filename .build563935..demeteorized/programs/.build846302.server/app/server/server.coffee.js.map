{"version":3,"sources":["server.coffee"],"names":[],"mappings":";AAAA,MAAM,CAAC,OAAP,CAAe;AAAA,EAEb,UAAU,SAAC,KAAD,EAAQ,KAAR,EAAe,IAAf;AAER,QAAG,KAAK,CAAC,YAAN,CAAmB,MAAM,CAAC,IAAP,EAAnB,EAAkC,CAAC,OAAD,EAAU,OAAV,CAAlC,CAAH;AAEE,YAAM,CAAC,MAAP,CAAc;AAAA,QACZ,OAAO,KADK;AAAA,QAEZ,OAAO,KAFK;AAAA,QAGZ,MAAM,IAHM;AAAA,QAIZ,UAAU,mCAJE;AAAA,QAKZ,WAAW,0BALC;AAAA,QAMZ,OAAO,kBANK;AAAA,QAOZ,OAAO,QAPK;AAAA,QAQZ,MAAM,OARM;AAAA,QASZ,KAAK,EATO;OAAd;aAYA,MAdF;KAAA;aAkBE,OAAO,CAAC,GAAR,CAAY,mBAAZ,EAlBF;KAFQ;EAAA,CAFG;AAAA,EAwBb,aAAa,SAAC,KAAD;AAEX,QAAG,KAAK,CAAC,YAAN,CAAmB,MAAM,CAAC,IAAP,EAAnB,EAAkC,CAAC,OAAD,EAAU,OAAV,CAAlC,CAAH;aAEE,MAAM,CAAC,MAAP,CAAc;AAAA,QAAC,OAAO,MAAM,CAAC,OAAP,CAAe;AAAA,UAAC,OAAO,KAAR;SAAf,CAA8B,CAAC,GAAvC;OAAd,EAFF;KAFW;EAAA,CAxBA;AAAA,EA8Bb,aAAa,SAAC,KAAD,EAAQ,IAAR;AAEX,QAAG,KAAK,CAAC,YAAN,CAAmB,MAAM,CAAC,IAAP,EAAnB,EAAkC,CAAC,OAAD,EAAU,OAAV,CAAlC,CAAH;aAEE,IAAI,CAAC,MAAL,CAAY;AAAA,QACV,OAAO,KADG;AAAA,QAEV,MAAM,IAFI;AAAA,QAGV,UAAU,yBAHA;AAAA,QAIV,WAAW,0BAJD;AAAA,QAKV,KAAK,EALK;OAAZ,EAFF;KAAA;aAYE,OAAO,CAAC,GAAR,CAAY,mBAAZ,EAZF;KAFW;EAAA,CA9BA;AAAA,EA8Cb,gBAAgB,SAAC,EAAD;AAEd,QAAG,KAAK,CAAC,YAAN,CAAmB,MAAM,CAAC,IAAP,EAAnB,EAAkC,CAAC,OAAD,EAAU,OAAV,CAAlC,CAAH;aAEE,IAAI,CAAC,MAAL,CAAY;AAAA,QAAC,OAAO,EAAR;OAAZ,EAFF;KAFc;EAAA,CA9CH;AAAA,EAoDb,YAAY,SAAC,KAAD,EAAQ,IAAR,EAAc,KAAd,EAAqB,KAArB;AAEV,WAAO,CAAC,GAAR,CAAY,gBAAZ;WAEA,QAAQ,CAAC,MAAT,CAAgB;AAAA,MAEd,OAAO,KAFO;AAAA,MAGd,MAAM,IAHQ;AAAA,MAId,OAAO,KAJO;AAAA,MAKd,OAAO,KALO;KAAhB,EAJU;EAAA,CApDC;AAAA,EAiEb,kBAAkB,SAAC,MAAD,EAAS,IAAT;WAEhB,KAAK,CAAC,IAAN,CAAW;AAAA,MACT,MAAM,wBADG;AAAA,MAET,IAAI,CAAC,+BAAD,EAAkC,yBAAlC,EAA6D,sBAA7D,CAFK;AAAA,MAGT,SAAS,MAHA;AAAA,MAIT,MAAM,IAJG;KAAX,EAFgB;EAAA,CAjEL;CAAf","file":"/server/server.coffee.js","sourcesContent":["Meteor.methods {\n\n  addEvent: (alias, title, date)->\n\n    if Roles.userIsInRole(Meteor.user(), ['owner', 'admin'])\n\n      Events.insert {\n        alias: alias\n        title: title\n        date: date\n        mainDesc: 'Полное описание программы события'\n        shortDesc: 'Краткое описание события'\n        place: 'место проведения'\n        price: '10000р'\n        time: '12:00'\n        pic: ''\n      }\n\n      alias\n\n    else\n\n      console.log 'permission denied'\n\n  removeEvent: (alias)->\n\n    if Roles.userIsInRole(Meteor.user(), ['owner', 'admin'])\n\n      Events.remove {'_id': Events.findOne({alias: alias})._id}\n\n  addNewsItem: (title, date)->\n\n    if Roles.userIsInRole(Meteor.user(), ['owner', 'admin'])\n\n      News.insert {\n        title: title\n        date: date\n        mainDesc: 'Полное описание новости'\n        shortDesc: 'Краткое описание новости'\n        pic: ''\n      }\n\n    else\n\n      console.log 'permission denied'\n\n  removeNewsItem: (id)->\n\n    if Roles.userIsInRole(Meteor.user(), ['owner', 'admin'])\n\n      News.remove {'_id': id}\n\n  addRequest: (event, name, phone, email)->\n\n    console.log 'saving request'\n\n    Requests.insert {\n\n      event: event\n      name: name\n      phone: phone\n      email: email\n\n    }\n\n  sendRequestEmail: (header, text)->\n\n    Email.send({\n      from: \"info@ladies-school.com\",\n      to: [\"info.sisi-elizabeth@yandex.ru\", \"info@sisi-elizabeth.com\", \"maria-skr-rt@mail.ru\"],\n      subject: header,\n      text: text\n    })\n\n}"]}