{"version":3,"sources":["blog.coffee"],"names":[],"mappings":"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","file":"/modules/components/blog/blog.coffee.js","sourcesContent":["Router.map ->\n\n  @route 'blogPage', {\n    path: 'blog/:alias'\n    template: 'blogPage'\n    layoutTemplate: 'innerLayout'\n    waitOn: ->\n      Meteor.subscribe 'blog'\n    data: ->\n      Blog.findOne({alias: @params.alias})\n    action: ->\n      if @ready()\n        @render()\n  }\n\n  @route 'bloglist', {\n    path: 'bloglist'\n    layoutTemplate: 'innerLayout'\n    template: 'blog'\n    waitOn: ->\n      [Meteor.subscribe('blog'), Meteor.subscribe('blogTags')]\n  }\n\n\n\nif Meteor.isClient\n\n\n  Meteor.subscribe 'blog'\n  Meteor.subscribe 'blogTags'\n  Meteor.subscribe 'blogCategories'\n\n  Session.set 'auraBlogListCategory', 'all'\n  Session.set 'auraBlogListSort', 'date'\n\n  Template.registerHelper 'blogList', ->\n\n    category = Session.get('auraBlogListCategory')\n    sortField = Session.get('auraBlogListSort')\n    sortQuery = {}\n    query = do ->\n      if category is 'all'\n        {}\n      else\n        {category: category}\n    sortQuery[sortField] = 1\n\n    Blog.find(query, sortQuery)\n\n  Template.registerHelper 'blogCategories', ->\n\n    BlogCategories.find()\n\n  Template.registerHelper 'getBlogDate', (date)->\n\n    moment(date).format('DD.MM.YYYY')\n\n  Template.blogCreateModal.rendered = ->\n\n    Meteor.defer ->\n      @.$('#blog-create-modal').addClass '_opened'\n    @.$('select').select2({\n      minimumResultsForSearch: -1\n    })\n\n\n  Meteor.startup ->\n\n    $('body').on 'click', '[data-goto-blog-page]', (e)->\n\n      console.log $(e.target)\n      if $(e.target).parent('.remove').length is 0\n        alias = $(e.currentTarget).data('alias')\n        Router.go 'blogPage', {alias: alias}\n\n\n    $('body').on 'click', '[data-aura-blog-remove-tag]', (e)->\n\n      tagId = $(e.currentTarget).closest('[data-tag-id]').data('tag-id')\n      recordId = $(e.currentTarget).closest('[data-aura-with]').data('aura-with')\n      Meteor.call 'removeTagFromRecord', recordId, tagId, (err, res)->\n        if err then console.log err\n\n    $('body').on 'click', '[data-aura-blog-next]', (e)->\n\n      currentId = $(e.currentTarget).closest('[data-aura-with]').data('aura-with')\n      BlogCtrl.nextRecord(currentId)\n\n    $('body').on 'click', '[data-aura-blog-prev]', (e)->\n\n      currentId = $(e.currentTarget).closest('[data-aura-with]').data('aura-with')\n      BlogCtrl.prevRecord(currentId)\n\n    $('body').on 'keypress', '#aura-blog-add-tag', (e)->\n\n      if e.which is 13\n\n        id = $(e.currentTarget).closest('[data-aura-with]').data('aura-with')\n\n        if BlogTags.findOne({name: $(e.currentTarget).val()})\n\n          tagId = BlogTags.findOne({name: $(e.currentTarget).val()})._id\n          if !_.contains Blog.findOne({_id: id}).tags, BlogTags.findOne({name: $(e.currentTarget).val()})._id\n            Meteor.call 'incrementBlogTagCount', $(e.currentTarget).val(), (err, res)->\n              if err\n                console.log err\n              else\n                Meteor.call 'addTagToRecord', id, res, (error, resp)->\n                  if error\n                    console.log error\n                  else\n                    $(e.target).val('')\n\n          else\n\n            Aura.notify 'Такой тег уже добавлен!'\n            $(e.target).val('')\n\n        else\n\n          Meteor.call 'createBlogTag', $(e.currentTarget).val(), (err, res)->\n\n            if err\n              console.log err\n            else\n              Meteor.call 'addTagToRecord', id, res, (error, resp)->\n                if error\n                  console.log error\n                else\n                  $(e.target).val('')\n\n\n\n    $('body').on 'click', '[data-add-new-blog-page]', (e)->\n\n      if !BlogCtrl.addModalTemplate\n        BlogCtrl.addModalTemplate = Blaze.render Template.blogCreateModal, document.body\n      else\n        $('#blog-create-modal').addClass('_opened')\n\n    $('body').on 'click', '#blog-create-modal button', (e)->\n      input = $('#blog-create-modal').find('input').val()\n      select = $('#blog-create-modal').find('select').val()\n      if input and input isnt ''\n        if !Blog.findOne({alias: input})\n          if !input.split(' ')[1]\n            $('#blog-create-modal').removeClass '_opened'\n            Meteor.setTimeout ->\n              BlogCtrl.addRecord input, select\n            , 400\n          else\n            Aura.notify 'Ссылка должна быть сплошной строкой без пробелов=('\n        else\n          Aura.notify 'Запись с таким именем уже существует=('\n      else\n        Aura.notify 'Пожалуйста введите название ссылки на статью'\n\n    $('body').on 'click', '.blog-cont .item .remove', (e)->\n      alias = $(e.currentTarget).closest('[data-alias]').data('alias')\n      (new PNotify({\n        title: 'Удалить запись?',\n        text: 'Возможности восстановить ее уже не будет',\n        hide: false,\n        addclass: 'aura-notify',\n        confirm: {\n          confirm: true\n        },\n        buttons: {\n          closer: false,\n          sticker: false\n        },\n        history: {\n          history: false\n        }\n      })).get().on('pnotify.confirm', ->\n\n        Meteor.call 'removeRecord', alias, (err, res)->\n          if err\n            console.log err\n          else\n            Aura.notify 'Запись удалена'\n\n      )\n\n    $('body').on 'click', '#blog-create-modal .remove', (e)->\n\n      $('#blog-create-modal').removeClass '_opened'\n\n\n\n  BlogCtrl = {\n\n    addModalTemplate: null\n\n    addRecord: (alias, category)->\n\n      console.log 'adding blog record'\n\n      Meteor.call 'addRecord', alias, category, (err, res)->\n\n        if err\n          console.log err\n\n        else\n          Router.go 'blogPage', {\n            alias: res\n          }\n\n\n    nextRecord: (currentId)->\n\n      blogList = Blog.find().fetch()\n      length = blogList.length\n      index = 0\n      nextId = ''\n      blogList.forEach (b)->\n        if b._id is currentId\n          if index + 1 > length\n            nextId = blogList[0]._id\n          else\n            nextId = blogList[index + 1]._id\n        index++\n      console.log nextId\n      nextRecordAlias = Blog.findOne({_id: nextId}).alias\n      Router.go 'blogPage', {alias: nextRecordAlias}\n\n    prevRecord: (currentId)->\n\n      blogList = Blog.find().fetch()\n      index = 0\n      prevId = ''\n      blogList.forEach (b)->\n        if b._id is currentId\n          if index - 1 < 0\n            prevId = _.last(blogList)._id\n          else\n            prevId = blogList[index - 1]._id\n        index++\n      console.log prevId\n      prevRecordAlias = Blog.findOne({_id: prevId}).alias\n      Router.go 'blogPage', {alias: prevRecordAlias}\n\n\n  }\n\n\n\n\n\n\n\n\n\n\nif Meteor.isServer\n\n\n  Meteor.methods {\n\n    addRecord: (alias, category)->\n\n      if Roles.userIsInRole(Meteor.user(), ['owner', 'admin'])\n\n        Blog.insert {\n\n          alias: alias\n          pic: null\n          title: 'Ваш заголовок'\n          date: Date.parse(new Date())\n          shortDesc: 'Краткое описание'\n          html: '<p>Напишите что-нибудь=)</p>'\n          tags: null\n\n        }\n\n        alias\n\n      else\n\n        console.log 'permission denied'\n\n    removeRecord: (alias)->\n\n      Blog.remove {'_id': Blog.findOne({alias: alias})._id}\n\n\n    addTagToRecord: (id, tag)->\n\n      console.log 'adding tag to record'\n      Blog.update {_id: id}, {$push: {tags: tag}}\n\n    createBlogTag: (name)->\n      console.log 'creating auraBlog tag with name: ' + name\n      BlogTags.insert {\n        name: name\n        count: 1\n      }\n\n    incrementBlogTagCount: (name)->\n      console.log 'incrementing auraBlog tag: ' + name\n      BlogTags.update {'name': name}, {$inc: {count: 1}}\n      BlogTags.findOne({'name': name})._id\n\n    removeTagFromRecord: (recordId, tagId)->\n      Blog.update {_id: recordId}, {$pull: {tags: tagId}}\n      if BlogTags.findOne({_id: tagId}).count > 1\n        BlogTags.update {_id: tagId}, {$inc: {count: -1}}\n      else\n        BlogTags.remove {_id: tagId}\n\n\n\n\n\n\n  }\n\n  Meteor.publish 'blog', ->\n    Blog.find()\n\n  Meteor.publish 'blogTags', ->\n    BlogTags.find()\n\n  Meteor.publish 'blogCategories', ->\n    BlogCategories.find()\n\n  Meteor.startup ->\n\n#    if Blog.find().count() > 0\n#      Blog.find().fetch().forEach (b)->\n#        Blog.remove b._id\n\n    if Blog.find().count() is 0\n\n      Blog.insert {\n\n        alias: 'new-record'\n        pic: 'blog_bg.jpg'\n        title: 'Новая классная статья в блоге'\n        date: Date.parse(new Date())\n        shortDesc: 'Это короткое описание статьи, его надо заполнять отдельно'\n        html: '<p>Новая статья, очень круто и весело, нам все нравится и мы получаем удовольствие. Очень много классного текста, еще больше, еще бооооольше</p><p class=\"inline-quot\">Это цитата, ее можно вставлять в текст динамически, достаточно симпатично смотрится и привлекает внимание, с ее помощью можно выделять важные элементы</p><p>Как же все таки круто нахлдиться в теплой компании, например на Рождество или Новый год, где-нибудь на курорте или что-нибудь такое.</p><img class=\"aura-float-left\" src=\"http://d1tvqt3gjtui5j.cloudfront.net/images/bal.jpg\" data-aura-image-embed alt=\"\"/><p>Это текст для обкатывания того, чтобы посмотреть как картинка выглядит прямо в тексте, вроде непохо.</p>'\n        tags: []\n      }\n\n      Blog.insert {\n\n        alias: 'new-record-again'\n        pic: 'blog_bg.jpg'\n        title: 'Новая классная статья в блоге'\n        date: Date.parse(new Date())\n        shortDesc: 'Это короткое описание статьи, его надо заполнять отдельно'\n        html: '<p>Новая статья, очень круто и весело, нам все нравится и мы получаем удовольствие</p><p>Как же все таки круто нахлдиться в теплой компании</p>'\n        tags: []\n      }\n\n      Blog.insert {\n\n        alias: 'new-record-yeeeah'\n        pic: 'blog_bg.jpg'\n        title: 'Новая классная статья в блоге'\n        date: Date.parse(new Date())\n        shortDesc: 'Это короткое описание статьи, его надо заполнять отдельно'\n        html: '<p>Новая статья, очень круто и весело, нам все нравится и мы получаем удовольствие</p><p>Как же все таки круто нахлдиться в теплой компании</p>'\n        tags: []\n      }\n\n#    if BlogTags.find().count() > 0\n#\n#      BlogTags.find().fetch().forEach (t)->\n#        BlogTags.remove {'_id': t._id}\n\n\n    if BlogCategories.find().count() > 0\n      BlogCategories.find().fetch().forEach (b)->\n        BlogCategories.remove b._id\n\n    if BlogCategories.find().count() is 0\n\n      BlogCategories.insert {\n        name: 'Школа'\n      }\n\n      BlogCategories.insert {\n        name: 'События'\n      }\n\n      BlogCategories.insert {\n        name: 'Обучение'\n      }\n\n#    if BlogTags.find().count() is 0\n#\n#      BlogTags.insert {\n#\n#        name: 'школа'\n#        count: 1\n#\n#      }\n#\n#      BlogTags.insert {\n#\n#        name: 'известные люди'\n#        count: 2\n#\n#      }\n#\n#      BlogTags.insert {\n#\n#        name: 'этикет'\n#        count: 3\n#\n#      }\n#\n#      BlogTags.insert {\n#\n#        name: 'саморазвитие'\n#        count: 3\n#\n#      }\n#\n#      BlogTags.insert {\n#\n#        name: 'интересное'\n#        count: 2\n#\n#      }\n#\n#      BlogTags.insert {\n#\n#        name: 'мероприятие'\n#        count: 2\n#\n#      }\n#\n#      BlogTags.insert {\n#\n#        name: 'фотоотчет'\n#        count: 2\n#\n#      }"]}